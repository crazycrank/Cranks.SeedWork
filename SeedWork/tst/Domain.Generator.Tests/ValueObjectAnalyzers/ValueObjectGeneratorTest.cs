using Verify = Cranks.SeedWork.Domain.Generator.Tests.Verifiers.CSharpSourceGeneratorVerifier<
    Cranks.SeedWork.Domain.Generator.ValueObjectAnalyzers.ValueObjectSourceGenerator>;

namespace Cranks.SeedWork.Domain.Generator.Tests.ValueObjectAnalyzers;

public class ValueObjectGeneratorTest
{
    [Fact]
    public async Task ValidCode_NoDiagnostics()
    {
        var test = @"
using Cranks.SeedWork.Domain.Attributes;

[ValueObject]
public partial record TestValueObject(int Value);
";

        var expected = @"// <auto-generated />

using Cranks.SeedWork.Domain;

partial record TestValueObject
    : ValueObjectUnary<int, TestValueObject>(Value)
{
}
";

        await Verify.VerifyGeneratorAsync(test, expected, "TestValueObject.g.cs");
    }
}
